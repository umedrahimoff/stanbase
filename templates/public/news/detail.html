{% extends 'layout.html' %}

{% block title %}{{ news.title }} — Новости компаний Центральной Азии | StanBase{% endblock %}

{% block meta_description %}{{ news.summary }}{% if news.content %}{{ news.content[:100] }}{% endif %} Новости инновационных компаний и технологий в Центральной Азии.{% endblock %}

{% block meta_keywords %}{{ news.title }}, новости компаний, Центральная Азия, Казахстан, Узбекистан, Кыргызстан, Таджикистан, Туркменистан, инновации, венчурные инвестиции, технологии{% endblock %}

{% block og_title %}{{ news.title }} — Новости компаний Центральной Азии | StanBase{% endblock %}

{% block og_description %}{{ news.summary }}{% if news.content %}{{ news.content[:100] }}{% endif %} Новости инновационных компаний и технологий в Центральной Азии.{% endblock %}

{% block twitter_title %}{{ news.title }} — Новости компаний Центральной Азии | StanBase{% endblock %}

{% block twitter_description %}{{ news.summary }}{% if news.content %}{{ news.content[:100] }}{% endif %} Новости инновационных компаний и технологий в Центральной Азии.{% endblock %}

{% block content %}
<div class="container-lg">
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Главная</a></li>
      <li class="breadcrumb-item"><a href="/news">Новости</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ news.title[:50] }}{% if news.title|length > 50 %}...{% endif %}</li>
    </ol>
  </nav>

  <div class="row">
    <!-- Левая колонка - Основная новость -->
    <div class="col-lg-8">
      <article class="news-detail">
        <header class="mb-4">
          <h1 class="h2 mb-3">{{ news.title }}</h1>
          <div class="d-flex align-items-center text-muted mb-3">
            <i class="bi bi-calendar3 me-2"></i>
            <span>{{ news.date.strftime('%d.%m.%Y') }}</span>
            {% if news.author %}
            <span class="mx-2">•</span>
            <i class="bi bi-person me-1"></i>
            <span>{{ news.author.name }}</span>
            {% endif %}
          </div>
          {% if news.summary %}
          <div class="lead text-muted mb-4">{{ news.summary }}</div>
          {% endif %}
        </header>

        {% if news.content %}
        <div class="news-content mb-4">
          {{ news.content|safe }}
        </div>
        {% endif %}

        <footer class="border-top pt-4">
          <div class="d-flex justify-content-between align-items-center">
            <a href="/news" class="btn btn-outline-secondary">
              <i class="bi bi-arrow-left me-1"></i>
              К списку новостей
            </a>
            <div class="text-muted small">
              <i class="bi bi-eye me-1"></i>
              Просмотров: {{ news.views|default(0) }}
            </div>
          </div>
        </footer>
      </article>
    </div>

                    <!-- Правая колонка - Дополнительный контент -->
                <div class="col-lg-4">
                  <!-- Другие новости -->
                  {% if other_news %}
                  <div class="card shadow-sm mb-4">
                    <div class="card-body">
                      <h5 class="mb-3">Другие новости</h5>
                      <ul class="list-group list-group-flush mb-4">
                        {% for other in other_news[:5] %}
                        <li class="list-group-item">
                          <a href="/news/{{ other.id }}"><b>{{ other.title }}</b></a><br>
                          <span class="text-muted small">{{ other.date.strftime('%d.%m.%Y') }}</span>
                        </li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                  {% endif %}

                  <!-- Ближайшие мероприятия -->
                  {% if upcoming_events %}
                  <div class="card shadow-sm mb-4">
                    <div class="card-body">
                      <h5 class="mb-3">Ближайшие мероприятия</h5>
                      <ul class="list-group list-group-flush mb-4">
                        {% for event in upcoming_events[:3] %}
                        <li class="list-group-item">
                          <a href="/event/{{ event.id }}"><b>{{ event.title }}</b></a><br>
                          <span class="text-muted small">{{ event.date.strftime('%d.%m.%Y') }}</span>
                          {% if event.location %}
                          <br><span class="text-muted small">{{ event.location }}</span>
                          {% endif %}
                        </li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                  {% endif %}

                  <!-- Актуальные вакансии -->
                  {% if recent_jobs %}
                  <div class="card shadow-sm mb-4">
                    <div class="card-body">
                      <h5 class="mb-3">Актуальные вакансии</h5>
                      <ul class="list-group list-group-flush mb-4">
                        {% for job in recent_jobs[:3] %}
                        <li class="list-group-item d-flex align-items-center">
                          {% if job.company and job.company.logo %}
                          <img src="{{ job.company.logo }}" alt="logo" width="32" height="32" class="rounded-circle me-2" style="object-fit:cover;">
                          {% elif job.company %}
                          <img src="https://api.dicebear.com/7.x/identicon/svg?seed={{ job.company.name|urlencode }}" alt="logo" width="32" height="32" class="rounded-circle me-2" style="object-fit:cover;">
                          {% endif %}
                          <div>
                            <span><a href="/job/{{ job.id }}"><b>{{ job.title }}</b></a>{% if job.company %}, <span class="fw-bold">{{ job.company.name }}</span>{% endif %}</span><br>
                            <span class="text-muted small">{{ job.city }}, {{ job.job_type }}</span>
                          </div>
                        </li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                  {% endif %}

                  <!-- Популярные компании -->
                  {% if popular_companies %}
                  <div class="card shadow-sm mb-4">
                    <div class="card-body">
                      <h5 class="mb-3">Популярные компании</h5>
                      <ul class="list-group list-group-flush mb-4">
                        {% for company in popular_companies[:3] %}
                        <li class="list-group-item d-flex align-items-center">
                          {% if company.logo %}
                          <img src="{{ company.logo }}" alt="logo" width="32" height="32" class="rounded-circle me-2" style="object-fit:cover;">
                          {% else %}
                          <img src="https://api.dicebear.com/7.x/identicon/svg?seed={{ company.name|urlencode }}" alt="logo" width="32" height="32" class="rounded-circle me-2" style="object-fit:cover;">
                          {% endif %}
                          <div>
                            <a href="/company/{{ company.id }}"><b>{{ company.name }}</b></a><br>
                            <span class="text-muted small">{{ company.country }}, {{ company.city }} | {{ company.industry }}</span>
                          </div>
                        </li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                  {% endif %}
                </div>
  </div>
</div>

<style>
.news-detail {
  background: #fff;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}

.news-content {
  line-height: 1.7;
  font-size: 1.1rem;
}

.news-content h2, .news-content h3, .news-content h4 {
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.news-content p {
  margin-bottom: 1.5rem;
}

.news-content img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1rem 0;
}

@media (max-width: 991.98px) {
  .news-detail {
    padding: 1.5rem;
  }
}
</style>
{% endblock %} 