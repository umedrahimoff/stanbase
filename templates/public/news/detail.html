{% extends 'layout.html' %}

{% block title %}{{ news.title }} — Новости компаний Центральной Азии | StanBase{% endblock %}

{% block meta_description %}{{ news.summary }}{% if news.content %}{{ news.content[:100] }}{% endif %} Новости инновационных компаний и технологий в Центральной Азии.{% endblock %}

{% block meta_keywords %}{{ news.title }}, новости компаний, Центральная Азия, Казахстан, Узбекистан, Кыргызстан, Таджикистан, Туркменистан, инновации, венчурные инвестиции, технологии{% endblock %}

{% block og_title %}{{ news.title }} — Новости компаний Центральной Азии | StanBase{% endblock %}

{% block og_description %}{{ news.summary }}{% if news.content %}{{ news.content[:100] }}{% endif %} Новости инновационных компаний и технологий в Центральной Азии.{% endblock %}

{% block twitter_title %}{{ news.title }} — Новости компаний Центральной Азии | StanBase{% endblock %}

{% block twitter_description %}{{ news.summary }}{% if news.content %}{{ news.content[:100] }}{% endif %} Новости инновационных компаний и технологий в Центральной Азии.{% endblock %}

{% block content %}
<div class="container-lg">
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Главная</a></li>
      <li class="breadcrumb-item"><a href="/news">Новости</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ news.title[:50] }}{% if news.title|length > 50 %}...{% endif %}</li>
    </ol>
  </nav>

  <div class="row">
    <!-- Левая колонка - Основная новость -->
    <div class="col-lg-8">
      <article class="news-detail">
        <header class="mb-4">
          <h1 class="h2 mb-3">{{ news.title }}</h1>
          <div class="d-flex align-items-center text-muted mb-3">
            <i class="bi bi-calendar3 me-2"></i>
            <span>{{ news.date.strftime('%d.%m.%Y') }}</span>
            {% if news.author %}
            <span class="mx-2">•</span>
            <i class="bi bi-person me-1"></i>
            <span>{{ news.author.name }}</span>
            {% endif %}
          </div>
          {% if news.summary %}
          <div class="lead text-muted mb-4">{{ news.summary }}</div>
          {% endif %}
        </header>

        {% if news.content %}
        <div class="news-content mb-4">
          {{ news.content|safe }}
        </div>
        {% endif %}

        <footer class="border-top pt-4">
          <div class="d-flex justify-content-between align-items-center">
            <a href="/news" class="btn btn-outline-secondary">
              <i class="bi bi-arrow-left me-1"></i>
              К списку новостей
            </a>
            <div class="text-muted small">
              <i class="bi bi-eye me-1"></i>
              Просмотров: {{ news.views|default(0) }}
            </div>
          </div>
        </footer>
      </article>
    </div>

    <!-- Правая колонка - Дополнительный контент -->
    <div class="col-lg-4">
      <div class="sidebar">
        <!-- Другие новости -->
        {% if other_news %}
        <div class="card mb-4">
          <div class="card-header">
            <h5 class="card-title mb-0">
              <i class="bi bi-newspaper me-2"></i>
              Другие новости
            </h5>
          </div>
          <div class="card-body p-0">
            {% for other in other_news[:5] %}
            <div class="p-3 border-bottom">
              <h6 class="mb-1">
                <a href="/news/{{ other.id }}" class="text-decoration-none">{{ other.title }}</a>
              </h6>
              <div class="text-muted small">{{ other.date.strftime('%d.%m.%Y') }}</div>
            </div>
            {% endfor %}
            <div class="p-3">
              <a href="/news" class="btn btn-sm btn-outline-primary w-100">Все новости</a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Ближайшие мероприятия -->
        {% if upcoming_events %}
        <div class="card mb-4">
          <div class="card-header">
            <h5 class="card-title mb-0">
              <i class="bi bi-calendar-event me-2"></i>
              Ближайшие мероприятия
            </h5>
          </div>
          <div class="card-body p-0">
            {% for event in upcoming_events[:3] %}
            <div class="p-3 border-bottom">
              <h6 class="mb-1">
                <a href="/event/{{ event.id }}" class="text-decoration-none">{{ event.title }}</a>
              </h6>
              <div class="text-muted small">
                <i class="bi bi-calendar3 me-1"></i>
                {{ event.date.strftime('%d.%m.%Y') }}
              </div>
              {% if event.location %}
              <div class="text-muted small">
                <i class="bi bi-geo-alt me-1"></i>
                {{ event.location }}
              </div>
              {% endif %}
            </div>
            {% endfor %}
            <div class="p-3">
              <a href="/events" class="btn btn-sm btn-outline-primary w-100">Все мероприятия</a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Актуальные вакансии -->
        {% if recent_jobs %}
        <div class="card mb-4">
          <div class="card-header">
            <h5 class="card-title mb-0">
              <i class="bi bi-briefcase me-2"></i>
              Актуальные вакансии
            </h5>
          </div>
          <div class="card-body p-0">
            {% for job in recent_jobs[:3] %}
            <div class="p-3 border-bottom">
              <h6 class="mb-1">
                <a href="/job/{{ job.id }}" class="text-decoration-none">{{ job.title }}</a>
              </h6>
              {% if job.company %}
              <div class="text-muted small">{{ job.company.name }}</div>
              {% endif %}
              {% if job.city %}
              <div class="text-muted small">
                <i class="bi bi-geo-alt me-1"></i>
                {{ job.city }}
              </div>
              {% endif %}
            </div>
            {% endfor %}
            <div class="p-3">
              <a href="/jobs" class="btn btn-sm btn-outline-primary w-100">Все вакансии</a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Популярные компании -->
        {% if popular_companies %}
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">
              <i class="bi bi-building me-2"></i>
              Популярные компании
            </h5>
          </div>
          <div class="card-body p-0">
            {% for company in popular_companies[:3] %}
            <div class="p-3 border-bottom">
              <div class="d-flex align-items-center">
                {% if company.logo %}
                <img src="{{ company.logo }}" alt="logo" width="32" height="32" class="rounded-circle me-2" style="object-fit:cover;">
                {% else %}
                <img src="https://api.dicebear.com/7.x/identicon/svg?seed={{ company.name|urlencode }}" alt="logo" width="32" height="32" class="rounded-circle me-2" style="object-fit:cover;">
                {% endif %}
                <div>
                  <h6 class="mb-0">
                    <a href="/company/{{ company.id }}" class="text-decoration-none">{{ company.name }}</a>
                  </h6>
                  <div class="text-muted small">{{ company.industry }}</div>
                </div>
              </div>
            </div>
            {% endfor %}
            <div class="p-3">
              <a href="/companies" class="btn btn-sm btn-outline-primary w-100">Все компании</a>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<style>
.news-detail {
  background: #fff;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}

.news-content {
  line-height: 1.7;
  font-size: 1.1rem;
}

.news-content h2, .news-content h3, .news-content h4 {
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.news-content p {
  margin-bottom: 1.5rem;
}

.news-content img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1rem 0;
}

.sidebar .card {
  border-radius: 12px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
  border: 1px solid #e9ecef;
}

.sidebar .card-header {
  background: #f8f9fa;
  border-bottom: 1px solid #e9ecef;
  border-radius: 12px 12px 0 0;
}

.sidebar .card-header h5 {
  font-size: 1rem;
  font-weight: 600;
}

.sidebar .card-body .p-3:last-child {
  border-bottom: none !important;
}

@media (max-width: 991.98px) {
  .news-detail {
    padding: 1.5rem;
  }
  
  .sidebar {
    margin-top: 2rem;
  }
}
</style>
{% endblock %} 